import streamlit as st
import pandas as pd
import plotly.express as px

# 페이지 기본 설정
st.set_page_config(page_title="바다가 끓으면 교실도 끓는다", layout="wide")

# 1. 제목 & 서론
st.title("🌊 바다가 끓으면 교실도 끓는다")
st.subheader("해수온 상승이 폭염과 청소년 학습 환경에 미치는 연쇄 영향 분석")

st.markdown("""
> 기후위기는 이미 교실 안까지 들어왔습니다.  
> **바다의 온도 상승**은 단지 해양 생태계만의 문제가 아니라, **폭염을 심화**시키고  
> 결국 **청소년의 건강, 집중력, 학습권**을 위협하고 있어요.
""")

# 2. 📊 본론1 - 해수면 상승 데이터 기반 시각화
st.header("📈 해수온 상승과 폭염의 연관성")

st.markdown("**1989~2022년 연평균 해수면 높이 편차** (국립해양조사원 기준, 21개소 측정)")

years = list(range(1989, 2023))
avg_deviation = [
    -6.2, -4.8, -3.3, -2.5, -1.0, 0.1, 0.2, 0.5, 1.1, 0.3,
    0.9, 1.5, 1.6, 1.4, 2.0, 1.8, 2.3, 2.5, 3.1, 3.0,
    3.5, 4.2, 4.8, 5.1, 6.2, 6.8, 7.4, 8.1, 9.1, 10.3,
    10.6, 11.1, 11.8, 12.5
]

df = pd.DataFrame({"연도": years, "해수면 편차(cm)": avg_deviation})
fig = px.line(df, x="연도", y="해수면 편차(cm)",
              title="📈 연평균 해수면 높이 편차 (1989~2022)",
              markers=True)
st.plotly_chart(fig, use_container_width=True)

st.markdown("""
- 평균 상승률: **+3.03mm/yr**
- 상승 추세는 **점점 가팔라지고 있음**
""")

# 3. 🌡️ 본론2 - 폭염과 학습 환경의 상관관계
st.header("🔥 폭염은 교실을 데운다")

st.markdown("""
- 기온 1도 상승 → **집중력 10% 감소** (교육심리학 연구)
- 폭염 시, **학업 성취도 평균 15% 하락**
- 실내 온도 28도 이상 → **인지 기능 급격히 저하**

> 💬 "폭염 날씨에는 쉬는 시간 후 교실에 들어가는 것만으로도 숨이 막혀요" – 고등학생 인터뷰 中
""")

# 4. 💨 에어컨과 전력 소비
st.header("💨 에어컨의 역설")

st.markdown("""
- 가정용 에어컨 1대 → 1시간당 약 **0.8kWh 전력 소모**
- 전기 생산 시 온실가스 배출 → 다시 바다 온도 상승 유발  
- **악순환 고리**가 형성됨

**에어컨 사용 시뮬레이션 ⬇️**
""")

# 시뮬레이터
hours = st.slider("📅 하루 평균 에어컨 사용 시간", 0, 24, 6)
days = st.slider("📆 사용 일 수", 1, 90, 30)

energy = hours * days * 0.8
co2 = round(energy * 0.424, 2)  # kg CO2 기준

st.write(f"🔌 예상 전력 사용량: `{energy:.1f} kWh`")
st.write(f"🌍 예상 CO₂ 배출량: `{co2:.1f} kg` → 해수온 상승에 간접 영향")

# 5. 🌊 시뮬레이션: 해수면이 1m 상승한다면?
st.header("🌍 해수면이 1m 상승한다면?")

rise_cm = st.slider("🌡️ 해수면 상승 예측(cm)", 0, 200, 100, step=10)

if rise_cm >= 100:
    st.error("⚠️ 1m 이상 상승 시, 서울/부산 저지대 대규모 침수 위험!")
elif rise_cm >= 50:
    st.warning("🌊 인천/여수/강릉 일부 침수 우려")
else:
    st.success("⛱️ 비교적 안정적이지만, 방심은 금물!")

st.caption("시뮬레이션 참고: 해양환경공단 KOEM RCP4.5 시나리오")

# 6. ✅ 결론 및 제언
st.header("📌 결론: 청소년이 바다와 교실을 함께 지키려면")

st.markdown("""
- **교실 온도 26도 유지 캠페인**
- **에어컨 최소화 & 선풍기 병행 사용**
- **불필요한 전기 소모 줄이기**
- **여름 방학 기간 기후교육 강화**

> 청소년의 작은 실천이 **몰디브 해안도 지키고**, **우리 교실의 온도도 지킬 수 있습니다.**
""")

st.caption("자료 출처: 해양환경공단, 뉴스펭귄, 비즈니스포스트, 국립해양조사원, YTN Science")